<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>??nh gi? iPhone 15 Pro Max 256GB - E-commerce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', Arial, Helvetica, sans-serif; }
        .star-rating { cursor: pointer; }
        .star-rating .star { transition: color 0.2s ease; }
        .star-rating .star.active { color: #FFC107; }
        .star-rating .star.hover { color: #FFE082; }
        .review-image { cursor: pointer; transition: transform 0.2s ease; }
        .review-image:hover { transform: scale(1.05); }
        .filter-badge.active { background-color: #0D6EFD; color: white; }
    </style>
</head>
<body class="bg-[#F8F9FA] leading-relaxed tracking-wide">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40">
        <div class="container mx-auto max-w-[1200px] px-4">
            <!-- Top Bar -->
            <div class="hidden md:flex items-center justify-between py-2 text-xs border-b border-gray-100">
                <div class="flex space-x-4">
                    <span class="text-[#6C757D]">? Hotline: 1900-1234</span>
                    <span class="text-[#6C757D]">? support@ecommerce.vn</span>
                </div>
                <div class="flex space-x-4">
                    <span class="text-[#6C757D]">14/08/2025 18:16</span>
                </div>
            </div>

            <!-- Main Header -->
            <div class="flex items-center justify-between py-3">
                <!-- Logo -->
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-2xl font-bold text-[#0D6EFD]">E-commerce</a>
                </div>
                
                <!-- Search Bar -->
                <div class="hidden md:flex flex-1 max-w-xl mx-8">
                    <div class="relative w-full">
                        <input type="text" placeholder="T?m ki?m s?n ph?m..." class="w-full h-10 px-4 pr-12 border border-[#CED4DA] rounded-l-md focus:outline-none focus:ring-2 focus:ring-[#0D6EFD] transition-colors duration-200">
                        <button class="absolute right-0 top-0 h-10 px-4 bg-[#0D6EFD] text-white rounded-r-md hover:bg-[#084298] transition-colors duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- User Actions -->
                <div class="flex items-center space-x-4">
                    <!-- User Account -->
                    <div class="relative group">
                        <button class="flex items-center space-x-2 text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            <span class="hidden md:block text-sm">hoangdvdinos</span>
                        </button>
                        <!-- Dropdown Menu -->
                        <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 hidden group-hover:block z-50">
                            <a href="#" class="block px-4 py-2 text-sm text-[#212529] hover:bg-[#F8F9FA]">T?i kho?n c?a t?i</a>
                            <a href="#" class="block px-4 py-2 text-sm text-[#212529] hover:bg-[#F8F9FA]">??n h?ng</a>
                            <a href="#" class="block px-4 py-2 text-sm text-[#212529] hover:bg-[#F8F9FA]">Y?u th?ch</a>
                            <div class="border-t border-gray-200"></div>
                            <a href="#" class="block px-4 py-2 text-sm text-[#DC3545] hover:bg-[#F8F9FA]">??ng xu?t</a>
                        </div>
                    </div>

                    <!-- Wishlist -->
                    <div class="relative cursor-pointer">
                        <svg class="w-6 h-6 text-[#6C757D] hover:text-[#DC3545] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                        <span class="absolute top-0 right-0 bg-[#DC3545] text-white rounded-full text-xs w-5 h-5 flex items-center justify-center transform translate-x-2 -translate-y-2">3</span>
                    </div>

                    <!-- Shopping Cart -->
                    <div class="relative cursor-pointer">
                        <svg class="w-6 h-6 text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m-.4 0L5 5H3m4 8h10m-10 0v6a1 1 0 001 1h8a1 1 0 001-1v-6m-10 0H3"></path>
                        </svg>
                        <span class="absolute top-0 right-0 bg-[#0D6EFD] text-white rounded-full text-xs w-5 h-5 flex items-center justify-center transform translate-x-2 -translate-y-2">0</span>
                    </div>
                </div>
            </div>

            <!-- Mobile Search -->
            <div class="md:hidden pb-3">
                <div class="relative">
                    <input type="text" placeholder="T?m ki?m s?n ph?m..." class="w-full h-10 px-4 pr-12 border border-[#CED4DA] rounded-md focus:outline-none focus:ring-2 focus:ring-[#0D6EFD]">
                    <button class="absolute right-2 top-2">
                        <svg class="w-6 h-6 text-[#6C757D]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <nav class="bg-white border-b border-gray-200">
        <div class="container mx-auto max-w-[1200px] px-4 py-3">
            <ol class="flex items-center space-x-2 text-sm">
                <li><a href="/" class="text-[#6C757D] hover:text-[#0D6EFD]">Trang ch?</a></li>
                <li class="text-[#6C757D]">/</li>
                <li><a href="/category/electronics" class="text-[#6C757D] hover:text-[#0D6EFD]">?i?n t?</a></li>
                <li class="text-[#6C757D]">/</li>
                <li><a href="/product/iphone-15-pro-max-256gb" class="text-[#6C757D] hover:text-[#0D6EFD]">iPhone 15 Pro Max 256GB</a></li>
                <li class="text-[#6C757D]">/</li>
                <li class="text-[#212529] font-medium">??nh gi?</li>
            </ol>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto max-w-[1200px] px-4 py-6">
        <!-- Product Info Header -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <div class="flex items-center space-x-6">
                <div class="w-24 h-24 bg-gray-200 rounded-lg flex-shrink-0"></div>
                <div class="flex-1">
                    <h1 class="text-2xl font-bold text-[#212529] mb-2">iPhone 15 Pro Max 256GB Titan T? nhi?n</h1>
                    <div class="flex items-center space-x-4 text-sm">
                        <div class="flex items-center space-x-1">
                            <div class="flex text-yellow-400 text-lg">?????</div>
                            <span class="font-bold text-[#212529]">4.8</span>
                            <span class="text-[#6C757D]">(1,234 ??nh gi?)</span>
                        </div>
                        <span class="text-[#6C757D]">?</span>
                        <span class="text-[#6C757D]">?? b?n 2,567</span>
                        <span class="text-[#6C757D]">?</span>
                        <span class="text-2xl font-bold text-[#DC3545]">?27,990,000</span>
                    </div>
                </div>
                <div class="flex flex-col space-y-2">
                    <a href="/product/iphone-15-pro-max-256gb" class="bg-[#0D6EFD] text-white rounded-md px-4 py-2 text-sm font-medium hover:bg-[#084298] transition-colors duration-200 text-center">
                        Xem s?n ph?m
                    </a>
                    <button onclick="scrollToWriteReview()" class="bg-white border border-[#FFC107] text-[#FFC107] rounded-md px-4 py-2 text-sm font-medium hover:bg-[#FFF9E6] transition-colors duration-200">
                        Vi?t ??nh gi?
                    </button>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Review Summary -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-sm p-6 sticky top-24">
                    <h2 class="text-xl font-bold text-[#212529] mb-4">? T?ng quan ??nh gi?</h2>
                    
                    <!-- Overall Rating -->
                    <div class="text-center mb-6">
                        <div class="text-5xl font-bold text-[#0D6EFD] mb-2">4.8</div>
                        <div class="flex justify-center text-yellow-400 text-2xl mb-2">?????</div>
                        <div class="text-sm text-[#6C757D]">1,234 ??nh gi?</div>
                    </div>

                    <!-- Rating Breakdown -->
                    <div class="space-y-3 mb-6">
                        <div class="flex items-center space-x-3">
                            <span class="text-sm w-8">5?</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                <div class="bg-[#198754] h-2 rounded-full" style="width: 75%"></div>
                            </div>
                            <span class="text-sm text-[#6C757D] w-12">926</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-sm w-8">4?</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                <div class="bg-[#0D6EFD] h-2 rounded-full" style="width: 18%"></div>
                            </div>
                            <span class="text-sm text-[#6C757D] w-12">222</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-sm w-8">3?</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                <div class="bg-[#FFC107] h-2 rounded-full" style="width: 5%"></div>
                            </div>
                            <span class="text-sm text-[#6C757D] w-12">62</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-sm w-8">2?</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                <div class="bg-[#FD7E14] h-2 rounded-full" style="width: 2%"></div>
                            </div>
                            <span class="text-sm text-[#6C757D] w-12">24</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-sm w-8">1?</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                <div class="bg-[#DC3545] h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            <span class="text-sm text-[#6C757D] w-12">0</span>
                        </div>
                    </div>

                    <!-- Review Filters -->
                    <div class="space-y-3">
                        <h3 class="font-bold text-[#212529]">L?c ??nh gi?</h3>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="filterReviews('all')" class="filter-badge active px-3 py-1 rounded-full text-sm border transition-colors duration-200">
                                T?t c? (1,234)
                            </button>
                            <button onclick="filterReviews('5')" class="filter-badge px-3 py-1 rounded-full text-sm border border-[#CED4DA] text-[#6C757D] hover:border-[#0D6EFD] transition-colors duration-200">
                                5? (926)
                            </button>
                            <button onclick="filterReviews('4')" class="filter-badge px-3 py-1 rounded-full text-sm border border-[#CED4DA] text-[#6C757D] hover:border-[#0D6EFD] transition-colors duration-200">
                                4? (222)
                            </button>
                            <button onclick="filterReviews('images')" class="filter-badge px-3 py-1 rounded-full text-sm border border-[#CED4DA] text-[#6C757D] hover:border-[#0D6EFD] transition-colors duration-200">
                                C? h?nh ?nh (456)
                            </button>
                            <button onclick="filterReviews('verified')" class="filter-badge px-3 py-1 rounded-full text-sm border border-[#CED4DA] text-[#6C757D] hover:border-[#0D6EFD] transition-colors duration-200">
                                ?? mua h?ng (1,089)
                            </button>
                        </div>
                    </div>

                    <!-- Sort Options -->
                    <div class="mt-6">
                        <h3 class="font-bold text-[#212529] mb-3">S?p x?p theo</h3>
                        <select id="sortReviews" class="w-full border border-[#CED4DA] rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#0D6EFD]">
                            <option value="newest">M?i nh?t</option>
                            <option value="oldest">C? nh?t</option>
                            <option value="rating_high">??nh gi? cao nh?t</option>
                            <option value="rating_low">??nh gi? th?p nh?t</option>
                            <option value="helpful">H?u ?ch nh?t</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Reviews List -->
            <div class="lg:col-span-3">
                <!-- Write Review Section -->
                <div id="writeReviewSection" class="bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-bold text-[#212529] mb-4">?? Vi?t ??nh gi? c?a b?n</h2>
                    
                    <form id="reviewForm" class="space-y-4">
                        <!-- Rating -->
                        <div>
                            <label class="text-sm font-medium text-[#212529] block mb-2">??nh gi? t?ng th? *</label>
                            <div class="star-rating flex space-x-1" data-rating="0">
                                <span class="star text-3xl text-gray-300 hover:text-[#FFC107] cursor-pointer" data-value="1">?</span>
                                <span class="star text-3xl text-gray-300 hover:text-[#FFC107] cursor-pointer" data-value="2">?</span>
                                <span class="star text-3xl text-gray-300 hover:text-[#FFC107] cursor-pointer" data-value="3">?</span>
                                <span class="star text-3xl text-gray-300 hover:text-[#FFC107] cursor-pointer" data-value="4">?</span>
                                <span class="star text-3xl text-gray-300 hover:text-[#FFC107] cursor-pointer" data-value="5">?</span>
                            </div>
                            <div id="ratingText" class="text-sm text-[#6C757D] mt-1">Nh?n v?o sao ?? ??nh gi?</div>
                        </div>

                        <!-- Review Title -->
                        <div>
                            <label class="text-sm font-medium text-[#212529] block mb-2">Ti?u ?? ??nh gi? *</label>
                            <input type="text" placeholder="VD: S?n ph?m tuy?t v?i, r?t h?i l?ng" class="w-full h-10 px-3 py-2 border border-[#CED4DA] rounded-md focus:outline-none focus:ring-2 focus:ring-[#0D6EFD]">
                        </div>

                        <!-- Review Content -->
                        <div>
                            <label class="text-sm font-medium text-[#212529] block mb-2">N?i dung ??nh gi? *</label>
                            <textarea rows="5" placeholder="Chia s? tr?i nghi?m c?a b?n v? s?n ph?m n?y..." class="w-full px-3 py-2 border border-[#CED4DA] rounded-md focus:outline-none focus:ring-2 focus:ring-[#0D6EFD] resize-none"></textarea>
                        </div>

                        <!-- Pros and Cons -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="text-sm font-medium text-[#212529] block mb-2">?u ?i?m</label>
                                <textarea rows="3" placeholder="Nh?ng ?i?m t?t c?a s?n ph?m..." class="w-full px-3 py-2 border border-[#CED4DA] rounded-md focus:outline-none focus:ring-2 focus:ring-[#0D6EFD] resize-none"></textarea>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-[#212529] block mb-2">Nh??c ?i?m</label>
                                <textarea rows="3" placeholder="Nh?ng ?i?m c?n c?i thi?n..." class="w-full px-3 py-2 border border-[#CED4DA] rounded-md focus:outline-none focus:ring-2 focus:ring-[#0D6EFD] resize-none"></textarea>
                            </div>
                        </div>

                        <!-- Photo Upload -->
                        <div>
                            <label class="text-sm font-medium text-[#212529] block mb-2">H?nh ?nh (t?y ch?n)</label>
                            <div class="border-2 border-dashed border-[#CED4DA] rounded-lg p-6 text-center hover:border-[#0D6EFD] transition-colors duration-200">
                                <input type="file" id="reviewImages" multiple accept="image/*" class="hidden">
                                <div onclick="document.getElementById('reviewImages').click()" class="cursor-pointer">
                                    <svg class="w-12 h-12 text-[#6C757D] mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                    <div class="text-[#6C757D] mb-1">Nh?n ?? th?m h?nh ?nh</div>
                                    <div class="text-xs text-[#6C757D]">JPG, PNG t?i ?a 5MB m?i ?nh</div>
                                </div>
                            </div>
                            <div id="imagePreview" class="mt-3 grid grid-cols-4 gap-2 hidden"></div>
                        </div>

                        <!-- Purchase Verification -->
                        <div class="flex items-center space-x-2">
                            <input type="checkbox" id="verifyPurchase" checked disabled class="rounded border-[#CED4DA] text-[#0D6EFD] focus:ring-[#0D6EFD]">
                            <label for="verifyPurchase" class="text-sm text-[#6C757D]">
                                <span class="text-[#198754] font-medium">? ?? mua s?n ph?m</span> - ??nh gi? t? kh?ch h?ng ?? mua h?ng
                            </label>
                        </div>

                        <!-- Submit Button -->
                        <div class="flex space-x-3">
                            <button type="submit" class="bg-[#0D6EFD] text-white rounded-md px-6 py-3 font-medium hover:bg-[#084298] transition-colors duration-200">
                                G?i ??nh gi?
                            </button>
                            <button type="button" onclick="cancelReview()" class="bg-white border border-[#6C757D] text-[#6C757D] rounded-md px-6 py-3 font-medium hover:bg-[#F8F9FA] transition-colors duration-200">
                                H?y
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Reviews List -->
                <div class="space-y-4" id="reviewsList">
                    <!-- Review 1 - 5 Stars -->
                    <div class="review-item bg-white rounded-lg shadow-sm border border-gray-200 p-6" data-rating="5" data-type="verified">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-[#0D6EFD] rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">
                                N
                            </div>
                            <div class="flex-1 min-w-0">
                                <!-- Review Header -->
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <span class="font-medium text-[#212529]">Nguy?n V?n An</span>
                                            <span class="bg-[#198754] text-white px-2 py-1 rounded text-xs font-medium">? ?? mua h?ng</span>
                                        </div>
                                        <div class="flex items-center space-x-2 mb-2">
                                            <div class="flex text-yellow-400">?????</div>
                                            <span class="text-sm text-[#6C757D]">?</span>
                                            <span class="text-sm text-[#6C757D]">12/08/2025 14:30</span>
                                        </div>
                                    </div>
                                    <button onclick="reportReview('review1')" class="text-[#6C757D] hover:text-[#DC3545] text-sm">
                                        B?o c?o
                                    </button>
                                </div>

                                <!-- Review Content -->
                                <div class="mb-4">
                                    <h4 class="font-medium text-[#212529] mb-2">S?n ph?m tuy?t v?i, r?t h?i l?ng!</h4>
                                    <p class="text-[#212529] leading-relaxed">
                                        iPhone 15 Pro Max th?c s? v??t mong ??i c?a t?i. Camera ch?p ?nh c?c k? s?c n?t, m?n h?nh hi?n th? r?t ??p v? m??t m?. 
                                        Pin s? d?ng c? ng?y m? v?n c?n d?. Thi?t k? titan cao c?p, c?m tay r?t ch?c ch?n. 
                                        Giao h?ng nhanh, ??ng g?i c?n th?n. R?t h?i l?ng v?i l?n mua h?ng n?y!
                                    </p>
                                </div>

                                <!-- Pros and Cons -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div class="bg-[#E8F5E8] rounded-lg p-3">
                                        <h5 class="font-medium text-[#198754] mb-2 text-sm">? ?u ?i?m</h5>
                                        <ul class="text-sm text-[#6C757D] space-y-1">
                                            <li>? Camera ch?t l??ng cao</li>
                                            <li>? Pin tr?u, d?ng c? ng?y</li>
                                            <li>? Thi?t k? ??p, cao c?p</li>
                                            <li>? Hi?u n?ng m?nh m?</li>
                                        </ul>
                                    </div>
                                    <div class="bg-[#FFF9E6] rounded-lg p-3">
                                        <h5 class="font-medium text-[#FFC107] mb-2 text-sm">? Nh??c ?i?m</h5>
                                        <ul class="text-sm text-[#6C757D] space-y-1">
                                            <li>? Gi? h?i cao</li>
                                            <li>? N?ng so v?i phi?n b?n th??ng</li>
                                        </ul>
                                    </div>
                                </div>

                                <!-- Review Images -->
                                <div class="grid grid-cols-4 gap-2 mb-4">
                                    <div class="review-image w-full h-20 bg-gray-200 rounded-lg" onclick="openImageModal('image1')"></div>
                                    <div class="review-image w-full h-20 bg-gray-200 rounded-lg" onclick="openImageModal('image2')"></div>
                                    <div class="review-image w-full h-20 bg-gray-200 rounded-lg" onclick="openImageModal('image3')"></div>
                                    <div class="review-image w-full h-20 bg-gray-200 rounded-lg" onclick="openImageModal('image4')"></div>
                                </div>

                                <!-- Review Actions -->
                                <div class="flex items-center space-x-6 text-sm">
                                    <button onclick="toggleLike('review1')" class="flex items-center space-x-1 text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V8a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path>
                                        </svg>
                                        <span id="likeCount-review1">H?u ?ch (23)</span>
                                    </button>
                                    <button onclick="replyToReview('review1')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Ph?n h?i
                                    </button>
                                    <button onclick="shareReview('review1')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Chia s?
                                    </button>
                                </div>

                                <!-- Store Reply -->
                                <div class="mt-4 p-4 bg-[#E7F3FF] rounded-lg border-l-4 border-[#0D6EFD]">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <div class="w-6 h-6 bg-[#0D6EFD] rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs font-bold">E</span>
                                        </div>
                                        <span class="text-sm font-medium text-[#0D6EFD]">E-commerce Official Store</span>
                                        <span class="text-xs text-[#6C757D]">13/08/2025 09:15</span>
                                    </div>
                                    <p class="text-sm text-[#212529]">
                                        C?m ?n anh Nguy?n V?n An ?? tin t??ng v? l?a ch?n s?n ph?m t?i c?a h?ng! 
                                        Ch?ng t?i r?t vui khi anh h?i l?ng v?i iPhone 15 Pro Max. 
                                        N?u c?n h? tr? g? th?m, anh vui l?ng li?n h? hotline 1900-1234 nh?!
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Review 2 - 4 Stars -->
                    <div class="review-item bg-white rounded-lg shadow-sm border border-gray-200 p-6" data-rating="4" data-type="verified">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-[#198754] rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">
                                T
                            </div>
                            <div class="flex-1 min-w-0">
                                <!-- Review Header -->
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <span class="font-medium text-[#212529]">Tr?n Th? B?ch</span>
                                            <span class="bg-[#198754] text-white px-2 py-1 rounded text-xs font-medium">? ?? mua h?ng</span>
                                        </div>
                                        <div class="flex items-center space-x-2 mb-2">
                                            <div class="flex text-yellow-400">?????</div>
                                            <span class="text-sm text-[#6C757D]">?</span>
                                            <span class="text-sm text-[#6C757D]">10/08/2025 16:20</span>
                                        </div>
                                    </div>
                                    <button onclick="reportReview('review2')" class="text-[#6C757D] hover:text-[#DC3545] text-sm">
                                        B?o c?o
                                    </button>
                                </div>

                                <!-- Review Content -->
                                <div class="mb-4">
                                    <h4 class="font-medium text-[#212529] mb-2">S?n ph?m t?t nh?ng gi? h?i cao</h4>
                                    <p class="text-[#212529] leading-relaxed">
                                        ?i?n tho?i ch?y r?t m??t, thi?t k? ??p v? c?m tay r?t ch?c ch?n. Camera ch?p ?nh ??m t?t h?n so v?i phi?n b?n c? c?a m?nh. 
                                        Tuy nhi?n gi? h?i cao so v?i mong ??i. N?u c? khuy?n m?i th? s? r?t t?t. Nh?n chung v?n h?i l?ng v?i s?n ph?m.
                                    </p>
                                </div>

                                <!-- Review Actions -->
                                <div class="flex items-center space-x-6 text-sm">
                                    <button onclick="toggleLike('review2')" class="flex items-center space-x-1 text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V8a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path>
                                        </svg>
                                        <span id="likeCount-review2">H?u ?ch (15)</span>
                                    </button>
                                    <button onclick="replyToReview('review2')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Ph?n h?i
                                    </button>
                                    <button onclick="shareReview('review2')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Chia s?
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Review 3 - 5 Stars with Video -->
                    <div class="review-item bg-white rounded-lg shadow-sm border border-gray-200 p-6" data-rating="5" data-type="verified">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-[#FFC107] rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">
                                L
                            </div>
                            <div class="flex-1 min-w-0">
                                <!-- Review Header -->
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <span class="font-medium text-[#212529]">L? Minh Ho?ng</span>
                                            <span class="bg-[#198754] text-white px-2 py-1 rounded text-xs font-medium">? ?? mua h?ng</span>
                                            <span class="bg-[#FFC107] text-white px-2 py-1 rounded text-xs font-medium">? Video</span>
                                        </div>
                                        <div class="flex items-center space-x-2 mb-2">
                                            <div class="flex text-yellow-400">?????</div>
                                            <span class="text-sm text-[#6C757D]">?</span>
                                            <span class="text-sm text-[#6C757D]">08/08/2025 20:45</span>
                                        </div>
                                    </div>
                                    <button onclick="reportReview('review3')" class="text-[#6C757D] hover:text-[#DC3545] text-sm">
                                        B?o c?o
                                    </button>
                                </div>

                                <!-- Review Content -->
                                <div class="mb-4">
                                    <h4 class="font-medium text-[#212529] mb-2">Tuy?t v?i! Chip A17 Pro th?c s? m?nh m?</h4>
                                    <p class="text-[#212529] leading-relaxed">
                                        M?nh l? game th? n?ng, iPhone 15 Pro Max v?i chip A17 Pro th?c s? ?n t??ng! 
                                        Ch?y game m??t nh? l?a, m?n h?nh 120Hz ??p kh?ng t? v?t. Camera zoom 5x r?t ti?n khi ch?p ?nh xa. 
                                        Pin kh?e, ch?i game li?n t?c 6-7 ti?ng v?n c?n. ??ng ??ng ti?n b?t g?o!
                                    </p>
                                </div>

                                <!-- Video Review -->
                                <div class="mb-4">
                                    <div class="relative w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                                        <div class="absolute inset-0 flex items-center justify-center">
                                            <button onclick="playVideo('review3')" class="w-16 h-16 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-opacity duration-200">
                                                <svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M8 5v14l11-7z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="absolute bottom-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs">
                                            2:34
                                        </div>
                                    </div>
                                </div>

                                <!-- Review Actions -->
                                <div class="flex items-center space-x-6 text-sm">
                                    <button onclick="toggleLike('review3')" class="flex items-center space-x-1 text-[#0D6EFD] font-medium transition-colors duration-200">
                                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                                            <path d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V8a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path>
                                        </svg>
                                        <span id="likeCount-review3">H?u ?ch (31)</span>
                                    </button>
                                    <button onclick="replyToReview('review3')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Ph?n h?i
                                    </button>
                                    <button onclick="shareReview('review3')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Chia s?
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Review 4 - 3 Stars -->
                    <div class="review-item bg-white rounded-lg shadow-sm border border-gray-200 p-6" data-rating="3" data-type="verified">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-[#6C757D] rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">
                                P
                            </div>
                            <div class="flex-1 min-w-0">
                                <!-- Review Header -->
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <span class="font-medium text-[#212529]">Ph?m ??c Anh</span>
                                            <span class="bg-[#198754] text-white px-2 py-1 rounded text-xs font-medium">? ?? mua h?ng</span>
                                        </div>
                                        <div class="flex items-center space-x-2 mb-2">
                                            <div class="flex text-yellow-400">?????</div>
                                            <span class="text-sm text-[#6C757D]">?</span>
                                            <span class="text-sm text-[#6C757D]">05/08/2025 11:10</span>
                                        </div>
                                    </div>
                                    <button onclick="reportReview('review4')" class="text-[#6C757D] hover:text-[#DC3545] text-sm">
                                        B?o c?o
                                    </button>
                                </div>

                                <!-- Review Content -->
                                <div class="mb-4">
                                    <h4 class="font-medium text-[#212529] mb-2">S?n ph?m ?n nh?ng c? m?t s? v?n ??</h4>
                                    <p class="text-[#212529] leading-relaxed">
                                        M?y ch?y ?n, camera ch?p ??p. Nh?ng m?nh g?p m?t s? v?n ?? v? ph?n m?m, ??i khi b? lag khi m? nhi?u app. 
                                        C? l? do b?n iOS ch?a ???c t?i ?u ho?n to?n. Hi v?ng Apple s? c?p nh?t s?m. 
                                        Ngo?i ra th? thi?t k? v? ch?t l??ng build r?t t?t.
                                    </p>
                                </div>

                                <!-- Review Actions -->
                                <div class="flex items-center space-x-6 text-sm">
                                    <button onclick="toggleLike('review4')" class="flex items-center space-x-1 text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V8a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path>
                                        </svg>
                                        <span id="likeCount-review4">H?u ?ch (8)</span>
                                    </button>
                                    <button onclick="replyToReview('review4')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Ph?n h?i
                                    </button>
                                    <button onclick="shareReview('review4')" class="text-[#6C757D] hover:text-[#0D6EFD] transition-colors duration-200">
                                        Chia s?
                                    </button>
                                </div>

                                <!-- Store Reply -->
                                <div class="mt-4 p-4 bg-[#E7F3FF] rounded-lg border-l-4 border-[#0D6EFD]">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <div class="w-6 h-6 bg-[#0D6EFD] rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs font-bold">E</span>
                                        </div>
                                        <span class="text-sm font-medium text-[#0D6EFD]">E-commerce Official Store</span>
                                        <span class="text-xs text-[#6C757D]">06/08/2025 14:20</span>
                                    </div>
                                    <p class="text-sm text-[#212529]">
                                        C?m ?n anh Ph?m ??c Anh ?? ph?n h?i! Apple ?? ph?t h?nh b?n c?p nh?t iOS 17.0.3 kh?c ph?c c?c v?n ?? v? hi?u n?ng. 
                                        Anh vui l?ng c?p nh?t l?n phi?n b?n m?i nh?t nh?. N?u v?n g?p v?n ??, anh li?n h? b?o h?nh ?? ???c h? tr? t?t nh?t!
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Load More Reviews -->
                <div class="text-center mt-8">
                    <button onclick="loadMoreReviews()" class="bg-white border border-[#0D6EFD] text-[#0D6EFD] rounded-lg px-6 py-3 font-medium hover:bg-[#E7F3FF] transition-colors duration-200">
                        Xem th?m ??nh gi?
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 hidden z-50 flex items-center justify-center">
        <div class="relative max-w-4xl max-h-4xl p-4">
            <button onclick="closeImageModal()" class="absolute top-2 right-2 text-white hover:text-gray-300 z-10">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <img id="modalImage" src="" alt="Review image" class="max-w-full max-h-full object-contain">
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-[#212529] text-white py-12 mt-12">
        <div class="container mx-auto max-w-[1200px] px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold text-[#0D6EFD] mb-4">E-commerce</h3>
                    <p class="text-sm text-gray-300 mb-4">N?n t?ng mua s?m tr?c tuy?n h?ng ??u Vi?t Nam.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">V? ch?ng t?i</h4>
                    <div class="space-y-2 text-sm">
                        <a href="#" class="block text-gray-300 hover:text-white">Gi?i thi?u</a>
                        <a href="#" class="block text-gray-300 hover:text-white">Tuy?n d?ng</a>
                        <a href="#" class="block text-gray-300 hover:text-white">Tin t?c</a>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold mb-4">H? tr?</h4>
                    <div class="space-y-2 text-sm">
                        <a href="#" class="block text-gray-300 hover:text-white">Hotline: 1900-1234</a>
                        <a href="#" class="block text-gray-300 hover:text-white">H??ng d?n mua h?ng</a>
                        <a href="#" class="block text-gray-300 hover:text-white">Ch?nh s?ch ??i tr?</a>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold mb-4">K?t n?i</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white">Facebook</a>
                        <a href="#" class="text-gray-300 hover:text-white">Twitter</a>
                        <a href="#" class="text-gray-300 hover:text-white">Instagram</a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-300">
                <p>? 2025 E-commerce Vietnam. T?t c? quy?n ???c b?o l?u.</p>
            </div>
        </div>
    </footer>

    <script>
        let currentRating = 0;
        let currentFilter = 'all';
        let likedReviews = new Set();

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Update current time
            const now = new Date();
            const timeString = now.toLocaleString('vi-VN', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const timeElement = document.querySelector('.hidden.md\\:flex .text-\\[\\#6C757D\\]');
            if (timeElement && timeElement.textContent.includes('/')) {
                timeElement.textContent = timeString;
            }

            // Initialize star rating
            initializeStarRating();
            
            // Initialize image upload
            initializeImageUpload();
            
            // Initialize sort functionality
            document.getElementById('sortReviews').addEventListener('change', sortReviews);
            
            // Track page view
            console.log('Product reviews page viewed:', {
                product: 'iPhone 15 Pro Max 256GB',
                user: 'hoangdvdinos',
                timestamp: '2025-08-14 18:16:05'
            });
        });

        // Star rating functionality
        function initializeStarRating() {
            const starRating = document.querySelector('.star-rating');
            const stars = starRating.querySelectorAll('.star');
            const ratingText = document.getElementById('ratingText');
            
            stars.forEach((star, index) => {
                star.addEventListener('mouseenter', () => {
                    highlightStars(index + 1, 'hover');
                });
                
                star.addEventListener('mouseleave', () => {
                    highlightStars(currentRating, 'active');
                });
                
                star.addEventListener('click', () => {
                    currentRating = index + 1;
                    starRating.dataset.rating = currentRating;
                    highlightStars(currentRating, 'active');
                    updateRatingText(currentRating);
                });
            });
        }

        function highlightStars(count, type) {
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                star.classList.remove('active', 'hover');
                if (index < count) {
                    star.classList.add(type);
                }
            });
        }

        function updateRatingText(rating) {
            const texts = {
                1: 'R?t kh?ng h?i l?ng',
                2: 'Kh?ng h?i l?ng', 
                3: 'B?nh th??ng',
                4: 'H?i l?ng',
                5: 'R?t h?i l?ng'
            };
            document.getElementById('ratingText').textContent = texts[rating] || 'Nh?n v?o sao ?? ??nh gi?';
        }

        // Image upload functionality
        function initializeImageUpload() {
            const imageInput = document.getElementById('reviewImages');
            const imagePreview = document.getElementById('imagePreview');
            
            imageInput.addEventListener('change', function() {
                const files = Array.from(this.files);
                imagePreview.innerHTML = '';
                
                if (files.length > 0) {
                    imagePreview.classList.remove('hidden');
                    
                    files.forEach((file, index) => {
                        if (file.type.startsWith('image/')) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                const div = document.createElement('div');
                                div.className = 'relative';
                                div.innerHTML = `
                                    <img src="${e.target.result}" class="w-full h-20 object-cover rounded-lg">
                                    <button onclick="removeImage(${index})" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600">~</button>
                                `;
                                imagePreview.appendChild(div);
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                }
            });
        }

        function removeImage(index) {
            const imageInput = document.getElementById('reviewImages');
            const files = Array.from(imageInput.files);
            files.splice(index, 1);
            
            // Update file input (this is a workaround as file inputs are read-only)
            const dt = new DataTransfer();
            files.forEach(file => dt.items.add(file));
            imageInput.files = dt.files;
            
            // Trigger change event to update preview
            imageInput.dispatchEvent(new Event('change'));
        }

        // Review form submission
        document.getElementById('reviewForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (currentRating === 0) {
                alert('Vui l?ng ch?n s? sao ??nh gi?');
                return;
            }
                        const formData = new FormData(this);
            const reviewData = {
                rating: currentRating,
                title: formData.get('title') || this.querySelector('input[type="text"]').value,
                content: this.querySelector('textarea').value,
                pros: this.querySelectorAll('textarea')[1].value,
                cons: this.querySelectorAll('textarea')[2].value,
                images: Array.from(document.getElementById('reviewImages').files),
                timestamp: new Date().toISOString(),
                user: 'hoangdvdinos'
            };
            
            console.log('Submitting review:', reviewData);
            
            // Simulate review submission
            alert('C?m ?n b?n ?? g?i ??nh gi?! ??nh gi? c?a b?n s? ???c ki?m duy?t v? xu?t hi?n s?m.');
            
            // Reset form
            this.reset();
            currentRating = 0;
            highlightStars(0, 'active');
            updateRatingText(0);
            document.getElementById('imagePreview').classList.add('hidden');
            
            // Hide write review section
            document.getElementById('writeReviewSection').style.display = 'none';
        });

        function cancelReview() {
            document.getElementById('reviewForm').reset();
            currentRating = 0;
            highlightStars(0, 'active');
            updateRatingText(0);
            document.getElementById('imagePreview').classList.add('hidden');
        }

        function scrollToWriteReview() {
            document.getElementById('writeReviewSection').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
        }

        // Filter reviews
        function filterReviews(filter) {
            currentFilter = filter;
            
            // Update filter badges
            document.querySelectorAll('.filter-badge').forEach(badge => {
                badge.classList.remove('active');
                badge.classList.add('border-[#CED4DA]', 'text-[#6C757D]');
            });
            
            event.target.classList.add('active');
            event.target.classList.remove('border-[#CED4DA]', 'text-[#6C757D]');
            
            // Filter review items
            const reviews = document.querySelectorAll('.review-item');
            let visibleCount = 0;
            
            reviews.forEach(review => {
                const rating = review.dataset.rating;
                const type = review.dataset.type;
                const hasImages = review.querySelectorAll('.review-image').length > 0;
                
                let show = false;
                
                switch(filter) {
                    case 'all':
                        show = true;
                        break;
                    case '5':
                    case '4':
                    case '3':
                    case '2':
                    case '1':
                        show = rating === filter;
                        break;
                    case 'images':
                        show = hasImages;
                        break;
                    case 'verified':
                        show = type === 'verified';
                        break;
                }
                
                if (show) {
                    review.style.display = 'block';
                    visibleCount++;
                } else {
                    review.style.display = 'none';
                }
            });
            
            console.log(`Filtered reviews: ${filter}, showing ${visibleCount} reviews`);
        }

        // Sort reviews
        function sortReviews() {
            const sortValue = document.getElementById('sortReviews').value;
            const reviewsList = document.getElementById('reviewsList');
            const reviews = Array.from(reviewsList.querySelectorAll('.review-item'));
            
            reviews.sort((a, b) => {
                switch(sortValue) {
                    case 'newest':
                        return new Date(b.querySelector('.text-sm.text-\\[\\#6C757D\\]').textContent) - 
                               new Date(a.querySelector('.text-sm.text-\\[\\#6C757D\\]').textContent);
                    case 'oldest':
                        return new Date(a.querySelector('.text-sm.text-\\[\\#6C757D\\]').textContent) - 
                               new Date(b.querySelector('.text-sm.text-\\[\\#6C757D\\]').textContent);
                    case 'rating_high':
                        return parseInt(b.dataset.rating) - parseInt(a.dataset.rating);
                    case 'rating_low':
                        return parseInt(a.dataset.rating) - parseInt(b.dataset.rating);
                    case 'helpful':
                        const aLikes = parseInt(a.querySelector('[id^="likeCount"]').textContent.match(/\d+/)[0]);
                        const bLikes = parseInt(b.querySelector('[id^="likeCount"]').textContent.match(/\d+/)[0]);
                        return bLikes - aLikes;
                    default:
                        return 0;
                }
            });
            
            // Re-append sorted reviews
            reviews.forEach(review => {
                reviewsList.appendChild(review);
            });
            
            console.log('Reviews sorted by:', sortValue);
        }

        // Review actions
        function toggleLike(reviewId) {
            const likeButton = document.querySelector(`#likeCount-${reviewId}`);
            const currentText = likeButton.textContent;
            const currentCount = parseInt(currentText.match(/\d+/)[0]);
            
            if (likedReviews.has(reviewId)) {
                // Unlike
                likedReviews.delete(reviewId);
                likeButton.textContent = `H?u ?ch (${currentCount - 1})`;
                likeButton.parentElement.classList.remove('text-[#0D6EFD]', 'font-medium');
                likeButton.parentElement.classList.add('text-[#6C757D]');
            } else {
                // Like
                likedReviews.add(reviewId);
                likeButton.textContent = `H?u ?ch (${currentCount + 1})`;
                likeButton.parentElement.classList.add('text-[#0D6EFD]', 'font-medium');
                likeButton.parentElement.classList.remove('text-[#6C757D]');
            }
            
            console.log('Toggled like for review:', reviewId);
        }

        function replyToReview(reviewId) {
            console.log('Replying to review:', reviewId);
            alert(`T?nh n?ng ph?n h?i ??nh gi? s? ???c tri?n khai s?m!`);
        }

        function shareReview(reviewId) {
            const url = `${window.location.href}#${reviewId}`;
            
            if (navigator.share) {
                navigator.share({
                    title: '??nh gi? s?n ph?m',
                    text: 'Xem ??nh gi? n?y v? iPhone 15 Pro Max',
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url);
                alert('?? copy link ??nh gi?!');
            }
            
            console.log('Shared review:', reviewId);
        }

        function reportReview(reviewId) {
            if (confirm('B?n c? ch?c ch?n mu?n b?o c?o ??nh gi? n?y?')) {
                console.log('Reported review:', reviewId);
                alert('C?m ?n b?n ?? b?o c?o. Ch?ng t?i s? xem x?t v? x? l? s?m nh?t.');
            }
        }

        // Image modal
        function openImageModal(imageId) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            
            // In a real app, this would load the actual image
            modalImage.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23F3F4F6'/%3E%3Ctext x='400' y='300' text-anchor='middle' dy='.3em' font-family='Arial' font-size='32' fill='%236B7280'%3EReview Image ${imageId}%3C/text%3E%3C/svg%3E`;
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            document.getElementById('imageModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function playVideo(reviewId) {
            console.log('Playing video for review:', reviewId);
            alert('T?nh n?ng ph?t video ??nh gi? s? ???c tri?n khai s?m!');
        }

        function loadMoreReviews() {
            const button = event.target;
            button.textContent = '?ang t?i...';
            button.disabled = true;
            
            // Simulate loading more reviews
            setTimeout(() => {
                console.log('Loading more reviews...');
                
                // In a real app, this would load more reviews from API
                button.textContent = 'Kh?ng c?n ??nh gi? n?o';
                button.disabled = true;
                button.classList.add('opacity-50', 'cursor-not-allowed');
            }, 1500);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // ESC to close modal
            if (e.key === 'Escape') {
                closeImageModal();
            }
            
            // Ctrl/Cmd + Enter to submit review
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                const reviewForm = document.getElementById('reviewForm');
                if (reviewForm.style.display !== 'none') {
                    reviewForm.dispatchEvent(new Event('submit'));
                }
            }
        });

        // Click outside modal to close
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeImageModal();
            }
        });

        // Auto-save draft review
        let draftSaveTimeout;
        document.querySelectorAll('#reviewForm input, #reviewForm textarea').forEach(input => {
            input.addEventListener('input', function() {
                clearTimeout(draftSaveTimeout);
                draftSaveTimeout = setTimeout(() => {
                    const draftData = {
                        rating: currentRating,
                        title: document.querySelector('#reviewForm input[type="text"]').value,
                        content: document.querySelector('#reviewForm textarea').value,
                        pros: document.querySelectorAll('#reviewForm textarea')[1].value,
                        cons: document.querySelectorAll('#reviewForm textarea')[2].value,
                        timestamp: new Date().toISOString()
                    };
                    localStorage.setItem('reviewDraft', JSON.stringify(draftData));
                    console.log('Draft saved');
                }, 2000);
            });
        });

        // Load draft on page load
        window.addEventListener('load', function() {
            const draft = localStorage.getItem('reviewDraft');
            if (draft) {
                try {
                    const draftData = JSON.parse(draft);
                    
                    if (confirm('B?n c? m?t b?n nh?p ??nh gi? ch?a ho?n th?nh. B?n c? mu?n ti?p t?c?')) {
                        document.querySelector('#reviewForm input[type="text"]').value = draftData.title || '';
                        document.querySelector('#reviewForm textarea').value = draftData.content || '';
                        document.querySelectorAll('#reviewForm textarea')[1].value = draftData.pros || '';
                        document.querySelectorAll('#reviewForm textarea')[2].value = draftData.cons || '';
                        
                        if (draftData.rating) {
                            currentRating = draftData.rating;
                            highlightStars(currentRating, 'active');
                            updateRatingText(currentRating);
                        }
                    } else {
                        localStorage.removeItem('reviewDraft');
                    }
                } catch (e) {
                    console.error('Error loading draft:', e);
                    localStorage.removeItem('reviewDraft');
                }
            }
        });

        // Review submission success handler
        function onReviewSubmitSuccess() {
            localStorage.removeItem('reviewDraft');
            
            // Scroll to top of reviews
            document.getElementById('reviewsList').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
            
            // Show success message
            const successMessage = document.createElement('div');
            successMessage.className = 'bg-[#E8F5E8] border border-[#198754] text-[#198754] rounded-lg p-4 mb-6';
            successMessage.innerHTML = `
                <div class="flex items-center space-x-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                    </svg>
                    <span class="font-medium">C?m ?n b?n ?? g?i ??nh gi?! ??nh gi? c?a b?n ?ang ???c xem x?t.</span>
                </div>
            `;
            
            document.getElementById('reviewsList').insertBefore(successMessage, document.getElementById('reviewsList').firstChild);
            
            // Remove success message after 5 seconds
            setTimeout(() => {
                if (successMessage.parentNode) {
                    successMessage.remove();
                }
            }, 5000);
        }

        // Analytics tracking
        function trackReviewEngagement(action, reviewId) {
            console.log('Review engagement:', {
                action: action,
                reviewId: reviewId,
                user: 'hoangdvdinos',
                product: 'iPhone 15 Pro Max 256GB',
                timestamp: new Date().toISOString()
            });
        }

        // Enhanced interaction tracking
        document.addEventListener('click', function(e) {
            // Track filter usage
            if (e.target.classList.contains('filter-badge')) {
                trackReviewEngagement('filter_used', e.target.textContent);
            }
            
            // Track like actions
            if (e.target.closest('[onclick*="toggleLike"]')) {
                const reviewId = e.target.closest('[onclick*="toggleLike"]').getAttribute('onclick').match(/toggleLike\('([^']+)'\)/)[1];
                trackReviewEngagement('like_toggled', reviewId);
            }
            
            // Track image views
            if (e.target.classList.contains('review-image')) {
                trackReviewEngagement('image_viewed', e.target.closest('.review-item').dataset.rating);
            }
        });

        // Update time periodically
        setInterval(() => {
            const now = new Date();
            const timeString = now.toLocaleString('vi-VN', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const timeElements = document.querySelectorAll('.text-\\[\\#6C757D\\]');
            timeElements.forEach(el => {
                if (el.textContent.includes('/2025') && el.textContent.includes(':')) {
                    el.textContent = timeString;
                }
            });
        }, 60000);
    </script>
</body>
</html>